# Apartment floor plan

Этот проект реализует конвейер для восстановления плана квартиры по серии фотографий интерьеров.  
Основная цель — автоматически сгенерировать топологическую карту помещения (план), а также JSON-файл, описывающий стены и углы квартиры в виде графа.

---

## Обзор задачи

1. **Сегментация пола**: На основе переданных изображений строится бинарная маска, выделяющая пол.
2. **Сшивание изображений**: Все исходные картинки и их маски объединяются в единую панораму.
3. **Экстракция графа помещения**: Из итоговой маски пола извлекаются углы (вершины графа) и стены (рёбра графа).

---

## Архитектура и модель

- Используется модель **U-Net** (`segmentation_models_pytorch`) с энкодером `efficientnet-b3`.
- Модель обучена на собственном датасете с разметкой пола (см. `Dataset_floor_example`).
- Входное разрешение изображений: **128x128**.
- Выход — бинарная маска сегментации пола.

---

## Прототип

  Демонстрационный прототип находится в файле **main.ipynb**.

---

## Выполненные этапы

✅ **Генерация масок пола**  
- На основе входных изображений с помощью дообученной модели U-Net автоматически создаются бинарные маски, выделяющие пол.  
- Модель обучена на собственном датасете с разметкой пола и демонстрирует устойчивую сегментацию даже при изменении освещения и текстур напольного покрытия.

✅ **Склейка изображений и построение панорамы**  
- Все исходные фотографии и соответствующие им маски объединяются в единое изображение — панораму квартиры.  
- Результат: согласованная по пространству панорама интерьера и корректно совмещённая маска пола.

❌ **Извлечение графа помещения**  
- Этап выделения углов (вершин графа) и стен (рёбер) **не реализован** в текущей версии.
